# Tables

(ref:table1Caption) The four components of the `r yr` sablefish research and assessment survey.  
\ \
\ \


```{r table1, echo=FALSE}

#  Create a dataframe 4 columns wide
  Component<- c("Stratified random", "sampling (StRS),", "Type 3 (Random", "tagging)",
                "Traditional Inlet","Standardized", "", "" ,
                "Exploratory","","","",
                "Benthic impact","","","","") 
  Bait  <-    c("1 kg squid (bagged)", "4 kg hake (loose)", "","",
                "1 kg squid (bagged)", "", "", "" ,
                "1 kg squid (bagged)", "5 kg hake (loose)", "","",
                "Nuytco autonomous","camera system and","HOBO Pendant G","Loggers attached to","select traps") 
  
  Locations<- c("Five spatial strata", "(S1-S5)", "","",
                "Dean/Burke Channel", "Finlayson Channel", "Gil Island", "Portland Inlet" ,
                "Cliffe Point", "Koskimo Bay","","",
                "SW Vancouver Island","","","","")
  
  Protocol <- c("1/3 of traps used for tagging,","1/3 of traps used for biosamples,", 
                "(50 piece LS(W)MO),","1/3 of traps discarded",
                "1/2 of traps used for tagging,","1/2 of traps used for biosamples","(50 piece LSWMO)","" ,
                "1/3 of traps used for biosamples"," (50 piece LSWMO),","1/3 of traps used for tagging","and 1/3 of traps discarded",
                "Camera system deployed on","select sets.  Accelerometers","deployed on camera and survey", "sets.","" )
   
  Completed2012   <-  c("110","","","",
                        "5","5","5","5",
                        "2","","","",
                        "3","","","","")
  
  component        <-   data.frame(Component, Bait, Locations, Protocol, Completed2012)
  names(component) <-   c('Component', 'Bait/Method', 'Locations', 'Protocol','Total Sets')
  
  
       kableExtra::kable(component, booktabs = TRUE,linesep = "",
                   format = "latex",
                   align=c("l","l","l","l","c"),
                   caption = "(ref:table1Caption)")%>%
                   row_spec(0,    bold = T) %>%
                   row_spec(4,    hline_after = T) %>%
                   row_spec(8,    hline_after = T) %>%
                   row_spec(12,   hline_after = T) %>%  
                   column_spec(5, width  = "1.2cm") %>%  
       kableExtra::kable_styling(font_size = 9.5, position = "left",latex_options = "hold_position")

```
\ \
\ \
\ \

(ref:table2Caption) Spatial strata allocation for the stratified random survey design and completed strata counts (magenta) for the `r yr` sablefish research and assessment survey.
\ \
\ \

```{r table2, echo=FALSE}

       Strata      <- c("S1 (South West Coast Vancouver Island or SWCVI)",
                        "S2 (North West Coast Vancouver Island or NWCVI)",
                        "S3 (Queen Charlotte Sound or QCS)",
                        "S4 (South West Coast Haida Gwaii or SWCHG)",
                        "S5 (North West Coast Haida Gwaii or NWCHG)",
                        "Total ")
       act.strata  <- paste("select Year, DEPTH_STRATUM, SPATIAL_STRATUM, COUNT([SET]) AS sets ",
                           "from dbo.GFBIO_RESEARCH_TRIPS ",
                           "group by Year, DEPTH_STRATUM, SPATIAL_STRATUM ",
                           "having (Year = ", yr, " )", sep="")
       #surv.strata <- GetSQLData(act.strata,"Sablefish")
       #write.table(surv.strata, file = paste(path,"table2.csv",sep=''),row.names=FALSE, na="",col.names=TRUE, sep=",")
       surv.strata <-  read.csv(paste(path,'table2.csv',sep=''), header=T)

       RD1      <- c(7,7,14,6,7,41)
       RD1fish  <- surv.strata$sets[surv.strata$DEPTH_STRATUM =="RD1"]
       RD1fish[6]  <- sum(surv.strata$sets[surv.strata$DEPTH_STRATUM =="RD1"])
       RD2fish  <- surv.strata$sets[surv.strata$DEPTH_STRATUM =="RD2"]
       RD2fish[6]  <- sum(surv.strata$sets[surv.strata$DEPTH_STRATUM =="RD2"])
       RD3fish  <- surv.strata$sets[surv.strata$DEPTH_STRATUM =="RD3"]
       RD3fish[6]  <- sum(surv.strata$sets[surv.strata$DEPTH_STRATUM =="RD3"])     
       RD2      <- c(8,7,6,6,7,34)
       RD3      <- c(8,8,6,6,7,35)
       Total    <- c(23,22,26,18,21,110)
       Totfish  <- c(RD1fish[1]+RD2fish[1]+RD3fish[1], RD1fish[2]+RD2fish[2]+RD3fish[2],
                     RD1fish[3]+RD2fish[3]+RD3fish[3], RD1fish[4]+RD2fish[4]+RD3fish[4],
                     RD1fish[5]+RD2fish[5]+RD3fish[5], RD1fish[6]+RD2fish[6]+RD3fish[6]) # addition
       dataf    <- data.frame(Strata, RD1, RD1fish, RD2, RD2fish,RD3, RD3fish, Total, Totfish) 
       yrRD1    <- paste("RD1 ",yr,sep="")
       yrRD2    <- paste("RD2 ",yr,sep="")
       yrRD3    <- paste("RD3 ",yr,sep="")
       yrTot    <- paste("Total ",yr,sep="")
       
       colnames(dataf) <- c("Spatia Strata", "RD1",yrRD1, "RD2",yrRD2,"RD3",yrRD3,"Total",yrTot)
   
       kableExtra::kable(dataf, booktabs = TRUE,linesep = "",
                   format = "latex",
                   caption = "(ref:table2Caption)") %>%
              row_spec(0,    bold = T) %>%
              row_spec(5, hline_after = T) %>%
              column_spec(2, width  = "0.5cm") %>%
              column_spec(3, width  = "0.5cm", color="magenta" ) %>%
              column_spec(4, width  = "0.5cm") %>%
              column_spec(5, width  = "0.5cm", color="magenta") %>% 
              column_spec(6, width  = "0.5cm") %>% 
              column_spec(7, width  = "0.5cm", color="magenta") %>%          
              column_spec(8, width  = "0.7cm") %>%
              column_spec(9, width  = "0.5cm", color="magenta") %>% 
              row_spec(0, color="black") %>%
              row_spec(6, bold=T) %>%
              add_header_above(c(" "= 1, "Depth Strata" = 6, " " = 2), bold=T) %>%
       kableExtra::kable_styling(font_size = 9.5, position = "left",latex_options = "hold_position")
  
  
```

\ \
\ \
(ref:table3Caption) Summary of species captured during the `r yr` survey StRS sets conducted by the `r boat`. 

```{r table3,  echo=FALSE}

    options(knitr.kable.NA = '')
    dtSP    <- paste("exec procRReport_SpeciesSummary ", yr," ,'StRS'",sep="")
    #datSP  <- GetSQLData(dtSP,"Sablefish")
    #write.table(datSP, file = paste(path,"table3.csv",sep=''),row.names=FALSE, na="",col.names=TRUE, sep=",")
    datSP  <-  read.csv(paste(path,'table3.csv',sep=''), header=T)
    datSP$Total_weight     <- formatC(datSP$Total_weight, format="d", big.mark=",") 
 
    
    dat1SP <- datSP[,c(-1)] 
    dat1SP <- dat1SP[,c(-3)]
    dat1SP <- dat1SP[,c(-2)]
    dat1SP <- dat1SP[,c(-6)]  # trim columns
    cleandataSP<-dat1SP
    cleandataSP$Summary_sp    <- cleanf(cleandataSP$Summary_sp)  #  remove duplicates function
    cleandataSP$Total_weight      <- gsub("NA", "", cleandataSP$Total_weight)
    cleandataSP[20,2]  <- "Rockfish"

    colnames(cleandataSP)     <- c( "Category", "Common Name", "Scientific Name" , "Count", "Weight(kg)")
    
    kableExtra::kable(cleandataSP,
                      booktabs = TRUE,linesep = "",
                      longtable = T,
                      format = "latex",  caption = "(ref:table3Caption)") %>%
                      row_spec(0,    bold = T) %>%
                      row_spec(13,  hline_after = T) %>%
                      row_spec(25,  hline_after = T) %>%
                      row_spec(29,  hline_after = T) %>%
      
    kableExtra::kable_styling(font_size = 8, 
                              latex_options = "repeat_header",
                              position = "left",
                              repeat_header_text = "continued.", 
                              repeat_header_method = "replace"
                              )
   
```
\ \
\ \
(ref:table4Caption) Summary of species captured by the `r boat` during the `r yr` survey standardized sets conducted at mainland inlet localities. 
\ \
\ \

```{r table4, echo=FALSE}

  options(knitr.kable.NA = '')
  data.inlet   <- paste("exec procRReport_SpeciesSummary ",yr," ,'INLET STANDARDIZED'",sep="")
  #inlet.species      <-  GetSQLData(data.inlet,"Sablefish")
  #write.table(inlet.species, file = paste(path,"table4.csv",sep=''),row.names=FALSE, na="",col.names=TRUE, sep=",")
  inlet.species       <-  read.csv(paste(path,'table4.csv',sep=''),header=T)
  inlet.species$Total_weight  <-  formatC(inlet.species$Total_weight, format="d", big.mark=",") 
  
  inlet.species.table <- inlet.species[,c(-1,-3,-4,-9)]
  
  inlet.species.table$Summary_sp  <- cleanf(inlet.species.table$Summary_sp)  #use the remove duplicates function
  inlet.species.table$Total_weight <- gsub("NA", "", inlet.species.table$Total_weight)
  
  colnames(inlet.species.table)   <- c( "Category", "Common Name", "Scientific Name" , "Count", "Weight(kg)")

  kableExtra::kable(inlet.species.table,
                    booktabs = TRUE, linesep = "",
                    format = "latex",  caption = "(ref:table4Caption)") %>%
                    row_spec(0,  bold = T) %>%
                    row_spec(4,  hline_after = T) %>%
                    row_spec(8,  hline_after = T) %>%
                    row_spec(11, hline_after = T) %>%
  kableExtra::kable_styling(font_size = 8, position = "left",latex_options = "hold_position")

```
\clearpage
(ref:table5Caption) Summary of species captured by the `r boat` during the `r yr` survey from exploratory and camera sets.  
\ \
\ \

```{r table5, echo=FALSE}

  options(knitr.kable.NA = '')
  SetType         <-  c("Exploratory",
                        "",
                        "Camera")
  Category        <-  c("Roundfish species",
                        "Rockfish species",
                        "Roundfish species") 
  CommonName      <-  c("Sablefish",
                        "Pacific ocean perch",
                        "Sablefish")
  ScientificName  <-  c("ANOPLOPOMA FIMBRIA",
                        "SEBASTES ALUTUS",
                        "ANOPLOPOMA FIMBRIA")
  TotalCnt   <- c("1","1","1")

  component            <-   data.frame(SetType,Category, CommonName, ScientificName, TotalCnt)
  colnames(component)  <-   c( "Set Type", "Category", "Common Name", "Scientific Name" , "Count")
  

  kableExtra::kable(component,
                    booktabs = TRUE,linesep = "",
                    format = "latex",  caption = "(ref:table5Caption)") %>%
                    row_spec(0,  bold = T) %>%
                    row_spec(2,  hline_after = T) %>%
  kableExtra::kable_styling(font_size = 9.5, position = "left",latex_options = "hold_position")



```
\ \
\ \
(ref:table6Caption) Summary of sablefish fork length measurements collected during the `r yr` stratified random sets by spatial and depth stratum.
\ \
\ \

```{r table6, echo=FALSE}


    newdata2    <-   newdata  # created in results section

    kableExtra::kable(newdata2, row.names = FALSE,
                booktabs = TRUE,   linesep = "",
                format = "latex",  caption = "(ref:table6Caption)") %>%
      
    add_header_above(c( "Strata"= 2,
                        "Proportion" = 2, 
                        "Mean Fork Length (mm)" = 3),bold=T) %>%
      
    kableExtra::kable_styling(font_size = 9.5, position = "left", latex_options = "hold_position") %>%
                row_spec(0,    bold = T) %>%
                row_spec(3,    hline_after = T) %>%
                row_spec(4,    bold = T, hline_after = T) %>%
                row_spec(7,    hline_after = T) %>% 
                row_spec(8,    bold = T, hline_after = T) %>%      
                row_spec(11,   hline_after = T) %>%
                row_spec(12,   bold = T, hline_after = T) %>%      
                row_spec(15,   hline_after = T)   %>% 
                row_spec(16,   bold = T, hline_after = T) %>%   
                row_spec(19,   hline_after = T)   %>% 
                row_spec(20,   bold = T)
      
```
\clearpage

(ref:table7Caption) Sablefish tag recovery counts by distance from release site and years at liberty from tags recovered on the `r yr` survey. Distances were determined using the great circle distance between the survey release location and survey recovery location.
\ \
\ \

```{r table7, echo=FALSE, warning=FALSE}

      # same as Report_Survey_Tag_Recoveries in FishTag database
      tag  <- paste("SELECT YearGroups, MIN(CASE [Distance Group] WHEN '1.  <10 km' THEN CountTags END) AS [<10 km], ", 
                    "MIN(CASE [Distance Group] WHEN '2.  11-50 km' THEN CountTags END) AS [11-50 km], ", 
                    "MIN(CASE [Distance Group] WHEN '3.  51-100 km' THEN CountTags END) AS [51-100 km], ", 
                    "MIN(CASE [Distance Group] WHEN '4.  101-250 km' THEN CountTags END) AS [101-250 km], ", 
                    "MIN(CASE [Distance Group] WHEN '5.  251-500 km' THEN CountTags END) AS [251-500 km], ", 
                    "MIN(CASE [Distance Group] WHEN '6.  501-1000 km' THEN CountTags END) AS [501-1000 km], ", 
                    "MIN(CASE [Distance Group] WHEN '7.  >1000 km' THEN CountTags END) AS [>1000 km] ", 
                    "    FROM (SELECT dbo.DistTravel(TravelDistance) AS [Distance Group], ",
                    "dbo.DistTravelYearGrp(YearSpread) AS YearGroups, COUNT(release_tag) AS CountTags ",
                    "FROM (SELECT SUM(DISTANCE) AS TravelDistance, SUM(YearSpread) AS YearSpread, release_tag ",
                    "FROM (SELECT GIS_Release_Recovery_Distance_vw_1.TAG_ID, GIS_Release_Recovery_Distance_vw_1.RELEASE_YR,  ",
                    "GIS_Release_Recovery_Distance_vw_1.RECOVERY_YR,dbo.GIS_Release_Recovery_Distance_vw.RECOVERY_TAG AS release_tag,",                       
                    "GIS_Release_Recovery_Distance_vw_1.RECOVERY_TAG,GIS_Release_Recovery_Distance_vw_1.PREVIOUS_TAG_NUMBER, ",
                    "GIS_Release_Recovery_Distance_vw_1.RELEASE_EVENT, GIS_Release_Recovery_Distance_vw_1.RECOVERY_EVENT, ",
                    "GIS_Release_Recovery_Distance_vw_1.Release_Length, GIS_Release_Recovery_Distance_vw_1.Recovery_Length, ",
                    "GIS_Release_Recovery_Distance_vw_1.REL_MAJOR, ",
                    "GIS_Release_Recovery_Distance_vw_1.REL_LAT, GIS_Release_Recovery_Distance_vw_1.REL_LON, ",
                    "GIS_Release_Recovery_Distance_vw_1.REC_LAT, GIS_Release_Recovery_Distance_vw_1.REC_LON, ",
                    "GIS_Release_Recovery_Distance_vw_1.REC_SEAM, GIS_Release_Recovery_Distance_vw_1.REC_MAJOR, ",
                    "GIS_Release_Recovery_Distance_vw_1.DISTANCE, GIS_Release_Recovery_Distance_vw_1.RECOVERY_MONTH, ",
                    "GIS_Release_Recovery_Distance_vw_1.lineseg, GIS_Release_Recovery_Distance_vw_1.SEAMOUNT_IND, ",
                    "GIS_Release_Recovery_Distance_vw_1.RECAPTURE_FISH_ID, ",
                    "dbo.GIS_Release_Recovery_Distance_vw.RECOVERY_YR - dbo.GIS_Release_Recovery_Distance_vw.RELEASE_YR AS YearSpread ",
                    "    FROM dbo.GIS_Release_Recovery_Distance_vw INNER JOIN  ",
                    "dbo.GIS_Release_Recovery_Distance_vw AS GIS_Release_Recovery_Distance_vw_1 ON   ",
                    "dbo.GIS_Release_Recovery_Distance_vw.PREVIOUS_TAG_NUMBER = GIS_Release_Recovery_Distance_vw_1.RELEASE_TAG  ",
                    "WHERE (dbo.GIS_Release_Recovery_Distance_vw.RECOVERY_YR = 2012) ",
                    "UNION  ",
                    "SELECT  TAG_ID, RELEASE_YR, RECOVERY_YR, RELEASE_TAG, RECOVERY_TAG, PREVIOUS_TAG_NUMBER,   ",
                    "RELEASE_EVENT, RECOVERY_EVENT, Release_Length, Recovery_Length,   ",
                    "REL_MAJOR, REL_LAT, REL_LON, REC_LAT, REC_LON, REC_SEAM, REC_MAJOR, DISTANCE,   ",
                    "RECOVERY_MONTH, lineseg, SEAMOUNT_IND, RECAPTURE_FISH_ID,   ",
                    "RECOVERY_YR - RELEASE_YR AS YearSpread  ",
                    "FROM  dbo.GIS_Release_Recovery_Distance_vw AS GIS_Release_Recovery_Distance_vw_2  ",
                    "WHERE   (RECOVERY_YR = 2012) AND (NOT (RECAPTURE_FISH_ID IS NULL)) ) AS TAG01  ",
                    "GROUP BY release_tag) AS TAG02  ",
                    "GROUP BY dbo.DistTravel(TravelDistance), dbo.DistTravelYearGrp(YearSpread)) AS TAG03  ",
                    "GROUP BY YearGroups", sep="")
      tag.rec <- GetSQLData(tag,"FishTag")
      write.table(tag.rec, file = paste(path,"table7.csv",sep=''),row.names=FALSE, na="",col.names=TRUE, sep=",")
      tag.rec <-  read.csv(paste(path,'table7.csv',sep=''), header=T)
      
      tag.rec[is.na(tag.rec)] <- 0   # convert NA to zero in whole table
      tag.rec$YearGroups      <- as.character(tag.rec$YearGroups)  # change column to character
      tag.rec$YearGroups      <- gsub("Grp1.", "", tag.rec$YearGroups)
      tag.rec$YearGroups      <- gsub("Grp2.", "", tag.rec$YearGroups)
      tag.rec$YearGroups      <- gsub("Grp3.", "", tag.rec$YearGroups)  
      tag.rec$YearGroups      <- gsub("Grp4.", "", tag.rec$YearGroups)      
      tag.rec$Recoveries      <- as.numeric(rowSums(tag.rec[,2:8], na.rm=TRUE))
      
      ad.row <- c('Total Counts',sum(tag.rec$X.10.km),sum(tag.rec$X11.50.km),sum(tag.rec$X51.100.km),
                          sum(tag.rec$X101.250.km),sum(tag.rec$X251.500.km),sum(tag.rec$X501.1000.km),
                          sum(tag.rec$X.1000.km), sum(tag.rec$Recoveries) )
      tag.rec2 <- rbind(tag.rec,ad.row) 

      names(tag.rec2) <- c("Years at Liberty","<10","11-50","51-100","101-250","251-500","501-1000","1000+","Recovery count")
   
      kableExtra::kable(tag.rec2, row.names = FALSE,
                booktabs = TRUE,   linesep = "",
                format = "latex",  caption = "(ref:table7Caption)") %>% 
      add_header_above(c(" "= 1,
                        "Distance (km) from Release Location" = 7, 
                        " " = 1),bold=T) %>% 
      
       kableExtra::kable_styling(font_size = 9.5, position = "left", latex_options = "hold_position") %>%
                row_spec(0,    bold = T) %>%
                row_spec(6,    bold = T) %>%
                row_spec(5, hline_after = T) %>%
                column_spec(2, width  = "1.1cm")%>%
                column_spec(9, width  = "1.2cm")  
```
\ \
\ \
(ref:table8Caption) List of the North Pacific spiny dogfish tagged with pop-off satellite tags. The tube label and tag number identify the dogfish.  The GFBIO specimen identifier is included for database reference.
\ \
\ \

```{r table8, echo=FALSE}

     query  <- paste( "SELECT DATENAME(mm, GFBioSQL.dbo.SAMPLE.SAMPLE_DATE) + ' ' + ",
                      "CAST(DAY(GFBioSQL.dbo.SAMPLE.SAMPLE_DATE) AS varchar) + ',' +  ",
                      "CAST(YEAR(GFBioSQL.dbo.SAMPLE.SAMPLE_DATE) AS varchar) AS Date,  ",
                      "GFBioSQL.dbo.FISHING_EVENT.FE_MAJOR_LEVEL_ID AS [Set],  ",
                      "GFBioSQL.dbo.SPECIMEN.PRIMARY_TAG_NUMBER AS [Tube label - tag number],  ",
                      "GFBioSQL.dbo.SPECIMEN_MORPHOMETRICS.SPECIMEN_MORPHOMETRICS_VALUE AS [Precaudal length (mm)],  ",
                      "LEFT(MAJOR_STAT_AREA_1.MAJOR_STAT_AREA_NAME, 2) AS [Release GMU Area],  ",
                      "dbo.GFBIO_RESEARCH_TRIPS.SPATIAL_STRATUM AS [Release Spatial Strata],  ",
                      "GFBioSQL.dbo.SPECIMEN.SPECIMEN_ID AS [GFBio Specimen id] ",
                      "FROM GFBioSQL.dbo.TRIP INNER JOIN ",
                      "GFBioSQL.dbo.FISHING_EVENT ON GFBioSQL.dbo.TRIP.TRIP_ID = GFBioSQL.dbo.FISHING_EVENT.TRIP_ID INNER JOIN ",
                      "GFBioSQL.dbo.FISHING_EVENT_CATCH ON GFBioSQL.dbo.FISHING_EVENT.FISHING_EVENT_ID =  ",
                      "GFBioSQL.dbo.FISHING_EVENT_CATCH.FISHING_EVENT_ID INNER JOIN ",
                      "GFBioSQL.dbo.CATCH ON GFBioSQL.dbo.FISHING_EVENT_CATCH.CATCH_ID = GFBioSQL.dbo.CATCH.CATCH_ID INNER JOIN ",
                      "GFBioSQL.dbo.MAJOR_STAT_AREA ON GFBioSQL.dbo.FISHING_EVENT.MAJOR_STAT_AREA_CODE =  ",
                      "GFBioSQL.dbo.MAJOR_STAT_AREA.MAJOR_STAT_AREA_CODE INNER JOIN ",
                      "GFBioSQL.dbo.CATCH_SAMPLE ON GFBioSQL.dbo.CATCH.CATCH_ID = GFBioSQL.dbo.CATCH_SAMPLE.CATCH_ID INNER JOIN ",
                      "GFBioSQL.dbo.SAMPLE ON GFBioSQL.dbo.CATCH_SAMPLE.SAMPLE_ID = GFBioSQL.dbo.SAMPLE.SAMPLE_ID INNER JOIN ",
                      "GFBioSQL.dbo.SPECIMEN ON GFBioSQL.dbo.SAMPLE.SAMPLE_ID = GFBioSQL.dbo.SPECIMEN.SAMPLE_ID INNER JOIN ",
                      "GFBioSQL.dbo.MAJOR_STAT_AREA AS MAJOR_STAT_AREA_1 ON GFBioSQL.dbo.FISHING_EVENT.MAJOR_STAT_AREA_CODE =  ",
                      "MAJOR_STAT_AREA_1.MAJOR_STAT_AREA_CODE INNER JOIN ",
                      "GFBioSQL.dbo.SPECIMEN_MORPHOMETRICS ON GFBioSQL.dbo.SPECIMEN.SPECIMEN_ID =  ",
                      "GFBioSQL.dbo.SPECIMEN_MORPHOMETRICS.SPECIMEN_ID INNER JOIN ",
                      "dbo.GFBIO_RESEARCH_TRIPS ON GFBioSQL.dbo.FISHING_EVENT.TRIP_ID = dbo.GFBIO_RESEARCH_TRIPS.TRIP_ID AND  ",
                      "GFBioSQL.dbo.FISHING_EVENT.FE_MAJOR_LEVEL_ID = dbo.GFBIO_RESEARCH_TRIPS.[SET] ",
                      "WHERE  (GFBioSQL.dbo.FISHING_EVENT.FE_SUB_LEVEL_ID IS NULL) ",
                      "GROUP BY YEAR(GFBioSQL.dbo.TRIP.TRIP_START_DATE), GFBioSQL.dbo.TRIP.TRIP_ID,  ",
                      "GFBioSQL.dbo.FISHING_EVENT.FE_MAJOR_LEVEL_ID, GFBioSQL.dbo.CATCH.SPECIES_CODE,  ",
                      "GFBioSQL.dbo.SPECIMEN.PRIMARY_TAG_NUMBER, GFBioSQL.dbo.FISHING_EVENT.FISHING_EVENT_ID,  ",
                      "GFBioSQL.dbo.CATCH.CATCH_ID, GFBioSQL.dbo.SAMPLE.SAMPLE_ID, GFBioSQL.dbo.SPECIMEN.SPECIMEN_ID,  ",
                      "GFBioSQL.dbo.SAMPLE.SAMPLE_DATE, GFBioSQL.dbo.SPECIMEN_MORPHOMETRICS.SPECIMEN_MORPHOMETRICS_VALUE,  ",
                      "LEFT(MAJOR_STAT_AREA_1.MAJOR_STAT_AREA_NAME, 2), dbo.GFBIO_RESEARCH_TRIPS.SPATIAL_STRATUM ",
                      "HAVING (GFBioSQL.dbo.CATCH.SPECIES_CODE = '044') AND (GFBioSQL.dbo.TRIP.TRIP_ID = 73190) AND  ",
                      "(NOT (GFBioSQL.dbo.SPECIMEN.PRIMARY_TAG_NUMBER IS NULL)) ",
                      "ORDER BY [Set]", sep='')

     #popoff.tags <- GetSQLData(query,"Sablefish")
     #write.table(popoff.tags, file = paste(path,"table8.csv",sep=''),row.names=FALSE, na="",col.names=TRUE, sep=",")
     popoff.tags <-  read.csv(paste(path,'table8.csv',sep=''), header=T)
     
     names(popoff.tags) <- c("Date","Set","Tube-tag ID","Precaudal length (mm)","Release GMU Area","Release Spatial Strata","GFBio Specimen ID")
    
     kableExtra::kable(popoff.tags, row.names = FALSE,
                align=c('l', 'c','l','l','l','c'),
                booktabs = TRUE,   linesep = "",
                format = "latex",  caption = "(ref:table8Caption)") %>% 

       kableExtra::kable_styling(font_size = 9.5, position = "left", latex_options = "hold_position") %>%
                row_spec(0,    bold = T) %>%
                column_spec(1, width  = "2.7cm") %>%
                column_spec(2, width  = "0.7cm") %>%
                column_spec(3, width  = "2.7cm") %>%
                column_spec(4, width  = "1.2cm") %>%
                column_spec(5, width  = "1.2cm") %>%
                column_spec(6, width  = "1.7cm") %>%
                column_spec(7, width  = "1.8cm")
```
\clearpage




